# VerveStacks README Documentation System
# Unified YAML configuration for all README components
# Supports: core processing, timeslice analysis, grid modeling, AR6 scenarios

readme_sections:
  # ========================================
  # CORE PROCESSING DOCUMENTATION
  # ========================================
  core_processing:
    enabled_by_default: true
    order: 10
    
    header:
      template: |
        # VerveStacks Model Generation Notes - {iso_code}
        **Generated:** {timestamp}
    
    model_calibration:
      title: "## Model Calibration 2022"
      template: |
        {summary_metrics_table}
        
        **Note:** 2022 fossil and bio capacity is calibrated to EMBER and renewable capacities to IRENA. UNSD has incomplete data for fuel consumption, so the calibration is demonstrated against the total CO2 emission reported by EMBER. This shows that the efficiency assumptions are good.
    
    processing_parameters:
      title: "## Power Generation Assets"
      template: |
        {capacity_threshold_table}
        
        Announced and pre-construction projects are offered as options to the model for endogenous investment. This is particularly useful for hydro and pumped storage as country-wise potential is not readily available. We also get grid locations of all these units.
        
        ### üîÑ CCS Retrofit Potential
        | **Fuel Type** | **Retrofit Host Capacity** | **Retrofit Potential Capacity**
        |---------------|----------------------------|-------------------------------|
        | ‚ö´ **Coal** | {coal_ccs_retrofit_capacity_gw} | {coal_ccs_retrofit_capacity_after_penalty_gw} after capacity penalty |
        | üî• **Gas** | {gas_ccs_retrofit_capacity_gw} | {gas_ccs_retrofit_capacity_after_penalty_gw} after capacity penalty |
    
    data_sources:
      title: "## Data, Assumptions & Coverage"
      template: |
        ### Primary Data Sources
        
        #### Base-Year Power Plant Specifications
        - **Global Energy Monitor (GEM)** [üåê](https://globalenergymonitor.org)  
          Open-access database of individual power plants worldwide, including location, capacity, fuel type, commissioning year, and technical specifications.
        - **International Renewable Energy Agency (IRENA)** [üåê](https://www.irena.org/Statistics)  
          Global renewable energy capacity and generation statistics (2000‚Äì2022), disaggregated by country and technology.
        - **EMBER Climate** [üåê](https://ember-climate.org/data/)  
          Global dataset tracking electricity generation, installed capacity, and emissions intensity (2000‚Äì2022).
        
        #### Enhanced Renewable Energy Characterization
        - **GEM-REZoning-Atlite Integration** [`re_units_cf_grid_cell_mapping.csv`]  
          Enhanced renewable energy units with capacity factors from Atlite weather data and precise grid cell locations from REZoning database. This integration provides spatially-resolved capacity factors for existing renewable plants, enabling accurate performance modeling and grid cell assignment for spatial optimization.
        - **Capacity Factor Enhancement**: Individual renewable plants receive location-specific capacity factors derived from 2013 hourly weather patterns
        - **Spatial Grid Assignment**: Plants mapped to 50x50km REZoning grid cells for consistent spatial modeling
        
        ### Data Processing Notes
        - **Individual Plant Coverage**: {gem_coverage_pct}% of total capacity from plant-level GEM data
        - **Total Capacity Tracked**: {total_capacity_gw} GW from all sources
        - **Plants Above Threshold**: {plants_above_threshold} individual plants tracked
        - **Total Plants Processed**: {tracked_plants_count} plants in database
        - **Missing Capacity Added**: {missing_capacity_summary}
    
    model_structure:
      title: "## Model Structure"
      template: |
        ### Files Included
        - **Source Data**: `source_data/VerveStacks_{iso_code}.xlsx` - the full dataset in a model-agnostic format
        - **VEDA Model Files**: Complete model ready for Veda-TIMES execution
        - **Scenario Files**: NGFS climate scenarios and policy assumptions
        

  # ========================================
  # TIMESLICE ANALYSIS DOCUMENTATION
  # ========================================
  timeslice_analysis:
    enabled_when: "timeslice_analysis=True"
    order: 20
    
    temporal_modeling:
      title: "## Temporal Modeling & Timeslice Analysis"
      template: |
        ### Advanced Stress Period Identification
        
        This model employs sophisticated **statistical scenario generation** to identify critical periods in high-renewable energy systems:
        
        #### üî• **Scarcity Periods** - Renewable Shortage Crisis
        - Days with lowest renewable energy coverage relative to demand
        - Critical for capacity planning and storage requirements
        - Identifies when conventional backup power is most needed
        
        #### ‚ö° **Surplus Periods** - Renewable Excess Management  
        - Days with highest renewable generation exceeding demand
        - Essential for curtailment analysis and export/storage strategies
        - Shows opportunities for demand shifting and industrial electrification
        
        #### üå™Ô∏è **Volatile Periods** - Operational Challenges
        - Days with highest generation variability and unpredictability
        - Important for grid stability and flexible resource planning
        - Captures rapid ramping requirements for dispatchable assets
        
        ### Comprehensive Stress Period Analysis
        
        The following visualizations provide detailed insights into temporal patterns and critical periods:
        
        #### **Renewable Energy Analysis Overview**
        <div align="center">
        <img src="{model_folder_name}/timeslice_analysis/re_analysis_summary_{iso_code}.svg" alt="Renewable Energy Analysis Summary" width="100%">
        </div>
        
        #### **Aggregated months and hours (8 X 8 case)**
        <div align="center">
        <img src="{model_folder_name}/timeslice_analysis/aggregation_justification_{iso_code}_ts_048.svg" alt="Aggregated slices clustering" width="100%">
        </div>
        
        #### **Weekly Stress Periods (Extended Analysis)**
        <div align="center">
        <img src="{model_folder_name}/timeslice_analysis/stress_periods_s2_w_p2_d_weekly_{iso_code}.svg" alt="Weekly Stress Periods" width="100%">
        </div>
        
        #### **Triple-5 Critical Periods (Comprehensive Stress Analysis)**
        <div align="center">
        <img src="{model_folder_name}/timeslice_analysis/stress_periods_s5p5v5_d_{iso_code}.svg" alt="Triple-5 Critical Periods" width="100%">
        </div>
        
        ### Timeslice Structure Generation
        **Multi-Scale Temporal Resolution:**
        - **Base Aggregation**: 6 seasons √ó 8 daily periods = 48 base timeslices
        - **Critical Period Enhancement**: Additional segments for identified stress periods

  # ========================================
  # GRID MODELING DOCUMENTATION
  # ========================================
  grid_modeling:
    enabled_when: "grid_modeling=True"
    order: 30
    
    interactive_visualization:
      title: "## Grid Network Visualization"
      template: |
        ### üó∫Ô∏è **Grid Network Overview**
        
        This model includes a **comprehensive grid visualization** showing the complete transmission infrastructure and renewable energy integration:
        
        <div align="center">
          <img src="{grid_viz_image_path}" 
               alt="Grid Network Visualization" 
               style="max-width: 100%; height: auto; border: 2px solid #ddd; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
          <p><em>üó∫Ô∏è Grid network showing transmission infrastructure, power plants, and renewable energy zones</em></p>
        </div>
        
        **What you can explore:**
        - **Transmission Network**: High-voltage lines and substations from real grid data
        - **Power Plant Locations**: Actual generating facilities mapped to grid buses
        - **Renewable Energy Zones**: 50√ó50km grid cells with solar/wind potential
        - **Load Centers**: Industrial demand distribution across the network
        - **Grid Constraints**: Bottlenecks and transmission limitations
    
    network_topology:
      title: "### Grid Topology Statistics"
      template: |
        #### üìä **Transmission Infrastructure**
        
        | **Metric** | **Value** | **Description** |
        |------------|-----------|-----------------|
        | **Total Buses** | {total_buses} | Transmission substations and connection points |
        | **Transmission Lines** | {total_lines} | High-voltage transmission corridors |
        | **Voltage Levels** | {voltage_levels} | Multi-level transmission system (220kV, 380kV, etc.) |
        
        #### ‚ö° **Power Plant Integration**
        
        | **Integration Type** | **Count** | **Total Capacity** | **Description** |
        |---------------------|-----------|-------------------|-----------------|
        | **Plants Mapped to Buses** | {plants_mapped} | {plants_capacity_gw} GW | GEM power plants assigned to grid locations |
    
    spatial_resolution:
      title: "### Spatial Resolution & Renewable Zones"
      template: |
        #### üó∫Ô∏è **High-Resolution Grid Modeling**
        
        This model employs **50√ó50km spatial resolution** for detailed renewable energy analysis:
        
        | **Spatial Metric** | **Value** | **Technical Detail** |
        |-------------------|-----------|---------------------|
        | **Grid Cells** | {total_grid_cells} | 50√ó50km renewable energy zones |
        | **Solar/Wind Onshore Zones** | {solar_wind_onshore_zones} | Grid cells with solar and onshore wind potential |
        | **Wind Offshore Zones** | {wind_offshore_zones} | Grid cells with offshore wind potential |
        | **Zone-Bus Mappings** | {zone_bus_mappings} | REZoning zones assigned to transmission buses |
        
        #### üîå **Spatial Commodity System**
        
        Each grid cell generates location-specific electricity commodities:
        - **Solar**: `elc_spv_<cluster_id>`
        - **Wind Onshore**: `elc_won_<cluster_id>`
        - **Wind Offshore**: `elc_wof_<cluster_id>`
        
        This enables **grid-aware optimization** where renewable generation is constrained by:
        - Transmission capacity between zones
        - Grid stability requirements
        - Spatial resource quality variations
        - Inter-zone electricity trade opportunities
    
    load_distribution:
      title: "### Load Distribution Analysis"
      template: |
        #### üè≠ **Industrial Demand Mapping**
        
        Industrial electricity demand is spatially distributed across the transmission network using **Voronoi tessellation**:
        
        | **Load Distribution Method** | **Buses with Load** | **Total Industrial Load** | **Methodology** |
        |------------------------------|---------------------|---------------------------|-----------------|
        | **Voronoi Tessellation** | {voronoi_buses} | {voronoi_load_gw} GW | Geometric proximity-based allocation |
        
        #### üìà **Load Concentration Analysis**
        
        - **Highest Load Bus**: {max_load_bus} ({max_load_gw} GW)
        - **Load Distribution CV**: {load_cv}% (coefficient of variation)
        - **Load Balancing**: {load_balance_description}
        
        This spatial load distribution enables **realistic grid modeling** where:
        - Industrial demand varies by location
        - Transmission constraints affect supply-demand balancing
        - Grid bottlenecks impact renewable integration
        - Regional electricity trade opportunities are identified
    
    technical_methodology:
      title: "### Technical Implementation"
      template: |
        #### üî¨ **Grid Processing Methodology**
        
        **1. Network Extraction & Clustering**
        - **Source**: OpenStreetMap transmission data via PyPSA-Eur
        - **Clustering**: DBSCAN algorithm reduces bus count by {clustering_ratio}%
        - **Topology Preservation**: Critical transmission lines maintained during clustering
        - **Voltage Hierarchy**: Multi-level transmission system (220kV, 380kV, 500kV)
        
        **2. Renewable Zone Integration**
        - **REZoning Database**: 50√ó50km grid cells with LCOE and capacity factor data
        - **Spatial Mapping**: Zones assigned to nearest transmission buses
        - **Resource Quality**: Capacity factors vary by location and technology
        - **Grid Constraints**: Transmission capacity limits renewable integration
        
        **3. Power Plant Assignment**
        - **GEM Database**: Global Energy Monitor power plant locations
        - **Spatial Proximity**: Plants assigned to nearest transmission buses
        - **Capacity Aggregation**: Multiple plants at same bus aggregated
        - **Technology Classification**: Fuel type and generation technology preserved
        
        **4. Load Distribution Algorithm**
        - **Industrial Database**: Hotmaps industrial electricity consumption
        - **Voronoi Tessellation**: Geometric proximity-based allocation to nearest transmission buses
        - **Grid Integration**: Load assigned to transmission buses, not individual consumers
        
        #### üéØ **Model Capabilities**
        
        This grid modeling enables:
        - **Transmission Constraint Analysis**: Identify grid bottlenecks and expansion needs
        - **Renewable Integration Studies**: Optimize renewable deployment considering grid limits
        - **Inter-Regional Trade**: Model electricity exchange between grid zones
        - **Grid Stability Assessment**: Analyze system stability with high renewable penetration
        - **Investment Planning**: Identify optimal transmission and generation investments

  # ========================================
  # RENEWABLE ENERGY CHARACTERIZATION
  # ========================================
  renewable_energy:
    enabled_when: "supply_curves_exist=True"
    order: 35
    
    supply_curves:
      title: "## Renewable Energy Characterization"
      template: |
        VerveStacks provides comprehensive renewable energy potential analysis at unprecedented spatial resolution, 
        combining global resource assessments with realistic deployment constraints to deliver actionable insights 
        for energy system planning.

        ### **Data Foundation: REZoning Integration**

        Our renewable energy characterization builds on the REZoning database, providing detailed potential 
        assessments at 50√ó50 km grid resolution across 190+ countries. This high-resolution spatial data 
        captures the nuanced variations in renewable energy resources that are critical for accurate energy 
        system modeling.

        **Data Sources:**
        - **Solar Potential**: REZoning solar resource data with capacity factors and LCOE estimates
        - **Wind Onshore**: REZoning onshore wind potential with economic viability assessments  
        - **Wind Offshore**: REZoning offshore wind resources with marine-specific constraints
        - **Hourly Profiles**: Atlite-derived capacity factor time series for each grid cell

        ### **Land Use Conflict Resolution: Conservative Overlap Management**

        A critical challenge in renewable energy assessment is avoiding double-counting of land areas suitable 
        for both solar and wind development. VerveStacks implements a **conservative overlap resolution algorithm** 
        that ensures realistic deployment scenarios:

        **Most Pessimistic Assumption:**
        - When grid cells overlap between solar and wind potential, we apply **LCOE-based allocation**
        - The technology with **higher LCOE (less competitive)** receives a **reduced share** of the overlapping area
        - This conservative approach ensures our estimates represent **deployable potential** rather than theoretical maximums
        - **No double-counting**: Each grid cell contributes to less than the REZoning resource limits in cells with overlap

        This methodology reflects real-world deployment patterns where developers choose the most economically 
        viable technology for each location, ensuring our supply curves represent **realistic, achievable 
        renewable energy potential**.

        ### **Supply Curve Visualization**

        The resulting supply curves reveal the economic characteristics of renewable energy deployment, 
        showing how costs evolve as more capacity is developed:

        **Chart Features:**
        - **LCOE vs Cumulative Capacity**: Economic viability as deployment scales
        - **LCOE vs Cumulative Generation**: Resource potential in energy terms
        - **Technology Comparison**: Solar, Wind Onshore, and Wind Offshore potential
        - **Original vs Landuse-Adjusted**: Impact of conservative overlap management

        <div align="center">
        <img src="{model_folder_name}/renewable_energy/supply_curves_{iso_code}.svg" alt="Renewable Energy Supply Curves" width="100%">
        </div>

        This analysis provides the foundation for understanding renewable energy economics and informs 
        capacity expansion decisions in the VEDA/TIMES energy system models.

    clustering_methodology:
      title: "### Renewable Energy Clustering"
      template: |
        VerveStacks employs **intelligent spatial clustering** to transform high-resolution renewable energy 
        grid cells into manageable clusters while preserving essential resource characteristics and geographic diversity.

        #### **Clustering Overview**
        
        | **Clustering Metric** | **Value** | **Description** |
        |----------------------|-----------|-----------------|
        | **Grid Cells Processed** | {total_grid_cells} | 50√ó50km renewable energy grid cells |
        | **Clusters Generated** | {n_clusters} | Dynamically determined using n = cells^0.6 |
        | **Average Cluster Size** | {avg_cluster_size} grid cells | Mean grid cells per cluster |
        | **Cluster Size Range** | {cluster_size_range} grid cells | Variation in cluster composition |
        | **Grid Definition** | {data_source_description} | Transmission infrastructure basis |

        #### **Multi-Feature Clustering Algorithm**
        
        The clustering process combines multiple data dimensions to create economically and spatially coherent renewable energy zones:
                
        **Technical Implementation:**
        - **Algorithm**: Hierarchical clustering with Ward linkage
        - **Preprocessing**: PCA dimensionality reduction (50 components per technology)
        - **Standardization**: All features normalized before clustering
        - **Distance Metric**: Euclidean distance in transformed feature space

        #### **Capacity-Weighted Profile Aggregation**
        
        Each cluster receives a **capacity-weighted hourly profile** that preserves the temporal characteristics 
        of constituent grid cells while accounting for their relative renewable energy potential:
        
        ```
        cluster_profile[hour] = Œ£(grid_cell_profile[hour] √ó capacity_weight[cell]) / Œ£(capacity_weight[cell])
        ```
        
        This approach ensures that grid cells with higher renewable energy potential have proportionally 
        greater influence on the cluster's temporal generation pattern, maintaining economic rationality 
        in the aggregated profiles.

        #### **Geographic Hedging Benefits**
        
        **Why Clustering Matters**: Even in non-grid models, renewable energy clustering preserves critical 
        **geographic hedging** effects that are essential for realistic energy system modeling:
        
        - **Wind Resource Diversity**: Captures spatial variations in wind patterns and seasonal differences
        - **Solar Complementarity**: Preserves east-west and north-south solar resource variations
        - **Grid Connection Costs**: Maintains distance-based connection costs to transmission infrastructure
        - **Temporal Smoothing**: Geographic diversity reduces overall system variability
        
        **Universal Application**: Both grid and non-grid models use identical clustering methodology, 
        differing only in their synthetic grid definition (actual transmission vs. population centers).

        #### **Quality Filtering**
        
        Only economically viable renewable resources are included in the clustering process:
        - **Solar PV**: Grid cells with <5% capacity factor excluded
        - **Onshore Wind**: Grid cells with <8% capacity factor excluded
        - **Resource Focus**: Ensures clustering represents deployable potential, not theoretical maximums

        #### **Clustering Visualizations**
        
        The following visualizations show the spatial distribution of renewable energy clusters for each technology, 
        demonstrating how the algorithm balances resource quality, geographic diversity, and grid connectivity:

        **Solar PV Clustering:**
        <div align="center">
          <img src="{model_folder_name}/source_data/clustering_results_{iso_code}_solar.png" 
               alt="Solar PV Clustering Results" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Solar PV clustering showing {n_clusters} clusters from {total_grid_cells} grid cells using {data_source_description}</em></p>
        </div>

        **Onshore Wind Clustering:**
        <div align="center">
          <img src="{model_folder_name}/source_data/clustering_results_{iso_code}_wind_onshore.png" 
               alt="Onshore Wind Clustering Results" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Onshore wind clustering showing {n_clusters} clusters from {total_grid_cells} grid cells using {data_source_description}</em></p>
        </div>

        **Offshore Wind Clustering:**
        <div align="center">
          <img src="{model_folder_name}/source_data/clustering_results_{iso_code}_wind_offshore.png" 
               alt="Offshore Wind Clustering Results" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Offshore wind clustering showing {n_clusters} clusters from {total_grid_cells} grid cells using {data_source_description}</em></p>
        </div>

        **Visualization Features:**
        - **Technology-specific clustering**: Each renewable technology clustered independently
        - **Color-coded clusters**: Each cluster shown in distinct colors
        - **Grid cell boundaries**: 50√ó50km renewable energy zones
        - **Transmission infrastructure**: {data_source_description} overlaid for context
        - **Resource quality**: Cluster composition reflects capacity factor variations

  # ========================================
  # HYDRO AVAILABILITY SCENARIOS
  # ========================================
  hydro_availability:
    enabled_when: "hydro_capacity_gw > 1.0"
    order: 37
    
    hydro_scenarios:
      title: "## üíß Hydro Availability Scenarios"
      template: |
        ### Planning for Hydro Uncertainty
        
        Hydroelectric generation is inherently variable due to seasonal patterns, year-to-year climate variations, and long-term climate change. Traditional energy models often assume constant hydro availability based on historical averages, which can lead to significant underestimation of backup capacity needs and inadequate drought preparedness.
        
        **VerveStacks addresses this critical gap** by generating probabilistic hydro availability scenarios that capture:
        - **Natural variability**: Seasonal wet/dry cycles and multi-year persistence
        - **Climate change impacts**: Declining mean availability and increasing extremes  
        - **Extreme events**: Drought sequences that stress energy systems
        - **Country-specific patterns**: Drought thresholds based on historical operational experience
        
        ### **Methodology Overview**
        
        Our approach combines **24 years of historical data** (2000-2023) from EMBER Climate with advanced scenario generation to create realistic future pathways:
        
        1. **Historical Analysis**: Extract seasonal patterns, drought frequencies, and country-specific thresholds
        2. **Regime Classification**: Model persistence of wet, normal, and dry conditions  
        3. **Climate Adjustment**: Apply declining trends and increasing variability
        4. **Scenario Generation**: Create 100+ plausible futures preserving historical characteristics
        
        **Key Innovation**: Drought thresholds are derived from each country's bottom 20% of historical capacity factors, ensuring definitions reflect actual operational stress rather than arbitrary percentages.
        
        ### **{hydro_country_name} Hydro Profile**
        
        | **Planning Parameter** | **Value** | **Application** |
        |----------------------|-----------|-----------------|
        | **Hydro Dependency** | {hydro_share_percent}% of generation | System vulnerability assessment |
        | **P10 (Dry Scenario)** | {hydro_p10_avg} annual average | Security planning, reserve sizing |
        | **P50 (Base Scenario)** | {hydro_p50_avg} annual average | Expected case, financial planning |
        | **P90 (Wet Scenario)** | {hydro_p90_avg} annual average | Export opportunities, minimum backup |
        | **Historical Average** | {hydro_historical_avg} ({hydro_historical_years}) | Validation benchmark |
        | **Drought Threshold** | {hydro_drought_threshold} (P20 of historical) | Operational stress indicator |
        
        ### **Monthly Availability Patterns**
        
        <div align="center">
          <img src="{model_folder_name}/source_data/{hydro_monthly_chart_filename}" 
               alt="Monthly Hydro Availability Profile" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Monthly hydro availability showing P10/P50/P90 future scenarios validated against historical patterns</em></p>
        </div>
        
        ### **Long-term Trajectory Analysis**
        
        <div align="center">
          <img src="{model_folder_name}/source_data/{hydro_annual_chart_filename}" 
               alt="Annual Hydro Availability Trajectory" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Annual hydro trajectories connecting historical data (2000-2023) to future scenarios (2025-2050)</em></p>
        </div>
        
        ### **Planning Applications**
        
        **Capacity Planning**: Use P50 for base case sizing, verify adequacy with P10 scenarios  
        **Investment Analysis**: P10 scenarios for downside risk, P90 for upside potential  
        **System Operations**: P10 for emergency preparedness, P50 for maintenance scheduling  
        **Policy Analysis**: Understand drought impacts on energy security and backup requirements
        
        **Key Insight**: The future will not match historical averages. Planning for hydro variability using P10/P50/P90 scenarios is essential for reliable, cost-effective energy systems.

  # ========================================
  # AR6 CLIMATE SCENARIOS DOCUMENTATION
  # ========================================
  ar6_scenarios:
    enabled_when: "ar6_scenarios=True"
    order: 40
    
    regional_context:
      title: "## AR6 Climate Scenarios - {r10_region}"
      template: |
        This model incorporates climate scenario drivers from the IPCC AR6 database for the **{r10_region}** region, 
        derived from {ar6_records} vetted scenario-model combinations spanning {len(scenario_categories)} climate categories 
        from ambitious 1.5¬∞C pathways (C1) to limited mitigation trajectories (C7). The scenarios cover 
        {len(years_covered)} years from {min(years_covered)} to {max(years_covered)}, providing comprehensive 
        pathways for energy system transformation under different climate policy futures.
    
    scenario_visualization:
      title: "### Climate Scenario Trajectories"
      template: |
        <div align="center">
          <img src="{model_folder_name}/scenario_drivers/ar6_scenarios_{iso_code}.png" 
               alt="AR6 Climate Scenario Trajectories" 
               style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <p><em>Climate scenario trajectories showing CO2 prices, electricity growth, and hydrogen deployment across different climate ambitions</em></p>
        </div>
        
        **Key Insights:**
        - **{len(scenario_categories)} Climate Categories**: From 1.5¬∞C pathways to baseline scenarios
        - **{ar6_records} Scenario-Model Combinations**: Comprehensive coverage of transformation pathways  
        - **Regional Context**: {r10_region} region-specific climate policy patterns
        - **Temporal Coverage**: {min(years_covered)}-{max(years_covered)} transformation trajectories
    
    transformation_insights:
      title: "### Key Transformation Pathways"
      
      co2_prices:
        template: |
          **Carbon Pricing Evolution**: CO2 prices show dramatic divergence across climate ambitions, ranging from 
          ${co2_2030_c1_median:.0f} to ${co2_2030_c7_median:.0f}/tCO2 by 2030 under ambitious vs. limited action scenarios. 
          By 2050, this gap widens to ${co2_2050_c1_median:.0f}-${co2_2050_c7_median:.0f}/tCO2, reflecting the exponential 
          cost of delayed climate action. The {r10_region} region shows {price_volatility_description} across models, 
          with {uncertainty_range_description} indicating {model_agreement_level} on carbon pricing trajectories.
      
      electricity_growth:
        template: |
          **Electrification Acceleration**: Total electricity demand grows by {elec_growth_2050_c1:.1f}x under ambitious 
          climate scenarios (C1) compared to {elec_growth_2050_c7:.1f}x under limited action (C7) by 2050. This reflects 
          massive sectoral electrification across transport, heating, and industrial processes. The {r10_region} region 
          shows {electrification_pattern} with {demand_uncertainty} across scenario-model combinations.
      
      hydrogen_economy:
        template: |
          **Hydrogen Integration**: Hydrogen deployment reaches {hydrogen_2050_c1_median:.1f}% of electricity demand by 2050 
          under ambitious scenarios, compared to {hydrogen_2050_c7_median:.1f}% under limited action. This emerging fuel 
          pathway shows {hydrogen_volatility} across models, reflecting uncertainties in technology costs, infrastructure 
          development, and policy support. The {r10_region} region demonstrates {hydrogen_regional_pattern}.
      
      transport_electrification:
        template: |
          **Mobility Transformation**: Transport electricity consumption grows from {transport_2020_median:.1f}% to 
          {transport_2050_c1_median:.1f}% of total electricity demand under ambitious scenarios, representing a 
          {transport_growth_factor:.1f}x increase. This transformation shows {transport_uncertainty} across models, 
          with {transport_divergence_description} between optimistic and conservative electrification assumptions.
      
      scenario_statistics:
        template: |
          #### üìä **Scenario Database Statistics**
          
          | **Metric** | **Value** | **Description** |
          |------------|-----------|-----------------|
          | **Total Scenarios** | {ar6_records} | Vetted scenario-model combinations from AR6 database |
          | **Climate Categories** | {len(scenario_categories)} | From C1 (1.5¬∞C) to C7 (limited action) |
          | **Temporal Coverage** | {min(years_covered)}-{max(years_covered)} | Multi-decade transformation pathways |
          | **Regional Scope** | {r10_region} | IPCC R10 regional classification |
          | **IEA Baseline Records** | {iea_records} | Historical electricity balance data |
          | **Scenario Attributes** | {len(scenario_attributes)} | CO2 prices, electricity growth, hydrogen share |
    
    uncertainty_analysis:
      title: "### Scenario-Model Divergence Analysis"
      template: |
        **Model Agreement**: Analysis across {total_scenario_models} scenario-model combinations reveals:
        - **High Convergence**: CO2 pricing trajectories (CV: {co2_cv:.1f}%) and electricity growth (CV: {elec_cv:.1f}%)
        - **Moderate Uncertainty**: Transport electrification rates (CV: {transport_cv:.1f}%) 
        - **High Divergence**: Hydrogen deployment pathways (CV: {hydrogen_cv:.1f}%)
        
        **Regional Characteristics**: The {r10_region} region shows {regional_convergence_pattern} compared to global 
        averages, with {regional_specific_insights} reflecting {regional_context_factors}.

  # ========================================
  # QUALITY ASSURANCE & USAGE (ALWAYS INCLUDED)
  # ========================================
  quality_assurance:
    enabled_by_default: true
    order: 90
    
    quality_notes:
      title: "## Quality Assurance"
      template: |
        - Cross-validation between IRENA, EMBER, and UNSD statistics
        - Capacity-generation consistency checks
        - Technology classification verification
        - Historical data reconciliation for base year (2022)
        - Renewable resource potential validated against REZoning database
        - Temporal analysis verified through statistical scenario methods
    
    usage_notes:
      title: "## Usage Notes"
      template: |
        - For questions about specific data sources or methodology, refer to online documentation
        - Model parameters can be adjusted manually in the model files
        
        ---
        *Generated by VerveStacks Energy Model Processor*
        *For more information: [VerveStacks Documentation](https://vervestacks.readthedocs.io/en/latest/)*

# ========================================
# SECTION ORDERING AND CONDITIONAL LOGIC
# ========================================
section_order:
  - core_processing.header
  - core_processing.model_calibration
  - core_processing.processing_parameters
  - core_processing.data_sources
  - core_processing.model_structure
  - grid_modeling.interactive_visualization
  - grid_modeling.network_topology
  - grid_modeling.spatial_resolution
  - grid_modeling.load_distribution
  - grid_modeling.technical_methodology
  - renewable_energy.supply_curves
  - renewable_energy.clustering_methodology
  - hydro_availability.hydro_scenarios
  - timeslice_analysis.temporal_modeling
  - ar6_scenarios.regional_context
  - ar6_scenarios.scenario_visualization
  - ar6_scenarios.transformation_insights
  - ar6_scenarios.transformation_insights.scenario_statistics
  - ar6_scenarios.uncertainty_analysis
  - quality_assurance.quality_notes
  - quality_assurance.usage_notes
