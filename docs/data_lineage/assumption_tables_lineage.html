<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assumption Tables Data Lineage - VerveStacks</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .quick-facts {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 6px solid #28a745;
        }
        
        .quick-facts h2 {
            color: #28a745;
            margin-bottom: 20px;
        }
        
        .facts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .fact-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .fact-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .fact-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .calculation-flow {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .calculation-flow h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .formula-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }
        
        .step-diagram {
            margin: 30px 0;
            text-align: center;
        }
        
        .tables-section {
            margin-bottom: 40px;
        }
        
        .table-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table-header {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-title {
            font-size: 1.4em;
            margin-bottom: 5px;
        }
        
        .table-path {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .table-badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        
        .table-content {
            padding: 30px;
        }
        
        .table-purpose {
            color: #666;
            margin-bottom: 25px;
            font-style: italic;
            font-size: 1.1em;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .sample-data {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
        }
        
        .sample-data h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .sample-table {
            overflow-x: auto;
        }
        
        .sample-table table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        .sample-table th {
            background: #e9ecef;
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: left;
            font-weight: 600;
            color: #495057;
        }
        
        .sample-table td {
            border: 1px solid #dee2e6;
            padding: 8px;
            vertical-align: top;
        }
        
        .sample-table tr:nth-child(even) {
            background: #fdfdfe;
        }
        
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 2px 6px;
            font-weight: 600;
        }
        
        .key-insights {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-left: 5px solid #007bff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .key-insights h4 {
            color: #007bff;
            margin-bottom: 15px;
        }
        
        .assumptions-list {
            background: #fff3e0;
            border: 1px solid #ffcc02;
            border-left: 5px solid #ff9800;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .assumptions-list h4 {
            color: #ff9800;
            margin-bottom: 15px;
        }
        
        .sql-section {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .sql-section h4 {
            color: #90cdf4;
            margin-bottom: 15px;
        }
        
        .sql-query {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            line-height: 1.4;
        }
        
        .sql-comment {
            color: #68d391;
        }
        
        .sql-keyword {
            color: #f687b3;
        }
        
        .sql-table {
            color: #90cdf4;
        }
        
        .weighted-avg-section {
            background: #f0f8f0;
            border: 1px solid #28a745;
            border-left: 5px solid #28a745;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .weighted-avg-section h3 {
            color: #28a745;
            margin-bottom: 20px;
        }
        
        .breadcrumb {
            background: #e9ecef;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.95em;
        }
        
        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .impact-section {
            background: #ffe6f0;
            border: 1px solid #ff9ec7;
            border-left: 5px solid #e91e63;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .impact-section h4 {
            color: #e91e63;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="breadcrumb">
            <a href="../index.html">üìö Documentation Home</a> ‚Üí 
            <a href="index.html">üìä Data Lineage</a> ‚Üí 
            üí∞ Assumption Tables
        </div>
        
        <div class="header">
            <h1>üí∞ Assumption Tables Data Lineage</h1>
            <div class="subtitle">Technology Cost & Efficiency Parameters with Regional Multipliers</div>
        </div>
        
        <div class="quick-facts">
            <h2>üìã Quick Facts</h2>
            <p>The assumption tables provide technology-specific cost and efficiency parameters through multi-factor calculations that account for economies of scale, regional differences, and technological vintage.</p>
            
            <div class="facts-grid">
                <div class="fact-item">
                    <div class="fact-number">5</div>
                    <div class="fact-label">Excel Sheets</div>
                </div>
                <div class="fact-item">
                    <div class="fact-number">4</div>
                    <div class="fact-label">Multiplier Types</div>
                </div>
                <div class="fact-item">
                    <div class="fact-number">190+</div>
                    <div class="fact-label">Countries Covered</div>
                </div>
                <div class="fact-item">
                    <div class="fact-number">3</div>
                    <div class="fact-label">Cost Components</div>
                </div>
                <div class="fact-item">
                    <div class="fact-number">1</div>
                    <div class="fact-label">Source File</div>
                </div>
            </div>
        </div>
        
        <div class="calculation-flow">
            <h2>üßÆ Complete Calculation Methodology</h2>
            <p>VerveStacks computes capacity-weighted averages for thermal efficiency and costs using multiple assumption tables. The calculation follows this multi-step methodology:</p>
            
            <div class="formula-box">
<strong>Step 1:</strong> Multi-Factor Parameter Calculation
Parameter_Value = Base_Value √ó Size_Multiplier √ó Regional_Multiplier √ó [Efficiency_Factor]

<strong>Step 2:</strong> Capacity-Weighted Averaging  
Final_Value = SUM(Capacity_MW √ó Parameter_Value) √∑ SUM(Capacity_MW)
            </div>
            
            <div class="step-diagram">
                <svg width="100%" height="450" viewBox="0 0 1200 450">
                    <!-- Input Tables -->
                    <rect x="50" y="30" width="100" height="50" fill="#e3f2fd" stroke="#1976d2" rx="5"/>
                    <text x="100" y="50" text-anchor="middle" font-size="9" font-weight="bold">costs</text>
                    <text x="100" y="65" text-anchor="middle" font-size="7">Base values</text>
                    
                    <rect x="50" y="90" width="100" height="50" fill="#e8f5e8" stroke="#4caf50" rx="5"/>
                    <text x="100" y="110" text-anchor="middle" font-size="9" font-weight="bold">size_multipliers</text>
                    <text x="100" y="125" text-anchor="middle" font-size="7">Scale factors</text>
                    
                    <rect x="50" y="150" width="100" height="50" fill="#fff3e0" stroke="#ff9800" rx="5"/>
                    <text x="100" y="170" text-anchor="middle" font-size="9" font-weight="bold">regional_mult</text>
                    <text x="100" y="185" text-anchor="middle" font-size="7">Location adj</text>
                    
                    <rect x="50" y="210" width="100" height="50" fill="#f3e5f5" stroke="#9c27b0" rx="5"/>
                    <text x="100" y="230" text-anchor="middle" font-size="9" font-weight="bold">thermal_eff</text>
                    <text x="100" y="245" text-anchor="middle" font-size="7">Vintage eff</text>
                    
                    <rect x="50" y="270" width="100" height="50" fill="#ffebee" stroke="#f44336" rx="5"/>
                    <text x="100" y="290" text-anchor="middle" font-size="9" font-weight="bold">ep_regionmap</text>
                    <text x="100" y="305" text-anchor="middle" font-size="7">ISO mapping</text>
                    
                    <!-- Processing -->
                    <rect x="220" y="140" width="180" height="120" fill="#f8f9fa" stroke="#666" rx="8"/>
                    <text x="310" y="160" text-anchor="middle" font-size="11" font-weight="bold">get_costs_and_eff()</text>
                    <text x="310" y="180" text-anchor="middle" font-size="9">Multi-table JOIN</text>
                    <text x="310" y="200" text-anchor="middle" font-size="8">T1.capex √ó T2.capex √ó T3.capex</text>
                    <text x="310" y="215" text-anchor="middle" font-size="8">T1.fixom √ó T2.fixom √ó T3.fixom</text>
                    <text x="310" y="230" text-anchor="middle" font-size="8">T1.varom √ó T2.varom √ó T3.varom</text>
                    <text x="310" y="245" text-anchor="middle" font-size="8">T4.efficiency √ó T3.efficiency</text>
                    
                    <!-- Plant Records -->
                    <rect x="480" y="40" width="120" height="70" fill="#e1f5fe" stroke="#03a9f4" rx="5"/>
                    <text x="540" y="65" text-anchor="middle" font-size="10" font-weight="bold">Plant Records</text>
                    <text x="540" y="80" text-anchor="middle" font-size="8">Individual plants</text>
                    <text x="540" y="95" text-anchor="middle" font-size="8">with capacity</text>
                    
                    <!-- Weighted Average -->
                    <rect x="700" y="140" width="180" height="120" fill="#fff3e0" stroke="#ff9800" rx="8"/>
                    <text x="790" y="160" text-anchor="middle" font-size="11" font-weight="bold">Weighted Average</text>
                    <text x="790" y="180" text-anchor="middle" font-size="9">Capacity-Weighted</text>
                    <text x="790" y="200" text-anchor="middle" font-size="8">SUM(MW √ó param)</text>
                    <text x="790" y="215" text-anchor="middle" font-size="8">√∑</text>
                    <text x="790" y="230" text-anchor="middle" font-size="8">SUM(MW)</text>
                    
                    <!-- Final Output -->
                    <rect x="950" y="160" width="120" height="80" fill="#e8f5e8" stroke="#4caf50" rx="5"/>
                    <text x="1010" y="185" text-anchor="middle" font-size="10" font-weight="bold">Final Values</text>
                    <text x="1010" y="200" text-anchor="middle" font-size="8">Weighted CAPEX</text>
                    <text x="1010" y="215" text-anchor="middle" font-size="8">Weighted FIXOM</text>
                    <text x="1010" y="230" text-anchor="middle" font-size="8">Weighted VAROM</text>
                    
                    <!-- Output Table -->
                    <rect x="480" y="340" width="480" height="80" fill="#f0f8f0" stroke="#28a745" rx="8"/>
                    <text x="720" y="365" text-anchor="middle" font-size="12" font-weight="bold">existing_stock Table</text>
                    <text x="720" y="385" text-anchor="middle" font-size="9">Technology parameters integrated with plant data</text>
                    <text x="720" y="405" text-anchor="middle" font-size="8">capex | fixom | varom | efficiency | Capacity_GW</text>
                    
                    <!-- Arrows -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                        </marker>
                    </defs>
                    
                    <path d="M 150 55 L 210 180" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 150 115 L 210 190" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 150 175 L 210 200" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 150 235 L 210 220" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 150 295 L 210 240" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <path d="M 400 200 L 470 75" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 600 75 L 690 180" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 400 200 L 690 200" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <path d="M 880 200 L 940 200" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 1010 240 L 720 330" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                </svg>
            </div>
        </div>
        
        <div class="tables-section">
            <!-- Base Technology Costs -->
            <div class="table-card">
                <div class="table-header">
                    <div>
                        <div class="table-title">üí∞ Base Technology Costs</div>
                        <div class="table-path">ep_technoeconomic_assumptions.xlsx ‚Üí costs</div>
                    </div>
                    <div class="table-badge">Foundation</div>
                </div>
                <div class="table-content">
                    <div class="table-purpose">
                        Provides foundational cost parameters (CAPEX, FIXOM, VAROM) by technology type before any adjustments.
                    </div>
                    
                    <div class="content-grid">
                        <div class="sample-data">
                            <h4>üìä Sample Data</h4>
                            <div class="sample-table">
                                <table>
                                    <tr>
                                        <th>model_name</th>
                                        <th>capex</th>
                                        <th>fixom</th>
                                        <th>varom</th>
                                    </tr>
                                    <tr>
                                        <td>EGAS01</td>
                                        <td class="highlight">1200</td>
                                        <td class="highlight">25</td>
                                        <td class="highlight">3.5</td>
                                    </tr>
                                    <tr>
                                        <td>ECOA01</td>
                                        <td class="highlight">2500</td>
                                        <td class="highlight">45</td>
                                        <td class="highlight">5.2</td>
                                    </tr>
                                    <tr>
                                        <td>ENUC01</td>
                                        <td class="highlight">6000</td>
                                        <td class="highlight">120</td>
                                        <td class="highlight">2.1</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <div class="sample-data">
                            <h4>üìã Key Metadata</h4>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li><strong>Units:</strong> CAPEX ($/kW), FIXOM ($/kW-yr), VAROM ($/MWh)</li>
                                <li><strong>Technologies:</strong> 15+ thermal technologies</li>
                                <li><strong>Source:</strong> WEO technology costs, IRENA benchmarks</li>
                                <li><strong>Update frequency:</strong> Annual</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="key-insights">
                        <h4>üí° Key Insights</h4>
                        <ul style="padding-left: 20px;">
                            <li>Nuclear plants have highest CAPEX but lowest VAROM (fuel costs)</li>
                            <li>Gas plants balanced across all cost components</li>
                            <li>Coal plants high CAPEX and moderate O&M costs</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Size Multipliers -->
            <div class="table-card">
                <div class="table-header">
                    <div>
                        <div class="table-title">üìè Size Multipliers</div>
                        <div class="table-path">ep_technoeconomic_assumptions.xlsx ‚Üí costs_size_multipliers</div>
                    </div>
                    <div class="table-badge">Scale Effects</div>
                </div>
                <div class="table-content">
                    <div class="table-purpose">
                        Economies of scale adjustments based on plant capacity. Smaller plants have higher unit costs due to reduced efficiency in construction and operations.
                    </div>
                    
                    <div class="content-grid">
                        <div class="sample-data">
                            <h4>üìä Sample Data</h4>
                            <div class="sample-table">
                                <table>
                                    <tr>
                                        <th>size (MW)</th>
                                        <th>capex</th>
                                        <th>fixom</th>
                                        <th>varom</th>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td class="highlight">1.25</td>
                                        <td class="highlight">1.15</td>
                                        <td class="highlight">1.05</td>
                                    </tr>
                                    <tr>
                                        <td>100</td>
                                        <td class="highlight">1.10</td>
                                        <td class="highlight">1.05</td>
                                        <td class="highlight">1.02</td>
                                    </tr>
                                    <tr>
                                        <td>500</td>
                                        <td class="highlight">1.00</td>
                                        <td class="highlight">1.00</td>
                                        <td class="highlight">1.00</td>
                                    </tr>
                                    <tr>
                                        <td>1000</td>
                                        <td class="highlight">0.95</td>
                                        <td class="highlight">0.98</td>
                                        <td class="highlight">0.99</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <div class="sample-data">
                            <h4>‚öôÔ∏è Selection Logic</h4>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li><strong>Matching:</strong> Uses highest size ‚â§ actual plant capacity</li>
                                <li><strong>Baseline:</strong> 500 MW considered reference size (1.0 multiplier)</li>
                                <li><strong>Penalties:</strong> Small plants penalized more on CAPEX than O&M</li>
                                <li><strong>Benefits:</strong> Large plants get modest economies of scale</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="assumptions-list">
                        <h4>üîß Key Assumptions</h4>
                        <ul style="padding-left: 20px;">
                            <li>Size effects are more pronounced for capital costs than operating costs</li>
                            <li>Maximum penalty: 25% cost increase for 10 MW plants</li>
                            <li>Maximum benefit: 5% cost reduction for 1000+ MW plants</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Regional Multipliers -->
            <div class="table-card">
                <div class="table-header">
                    <div>
                        <div class="table-title">üåç Regional Multipliers</div>
                        <div class="table-path">ep_technoeconomic_assumptions.xlsx ‚Üí regional_multipliers</div>
                    </div>
                    <div class="table-badge">Location Effects</div>
                </div>
                <div class="table-content">
                    <div class="table-purpose">
                        Country-specific cost adjustments based on labor costs, material prices, and economic conditions. Reflects real-world cost differences across regions.
                    </div>
                    
                    <div class="content-grid">
                        <div class="sample-data">
                            <h4>üìä Sample Data</h4>
                            <div class="sample-table">
                                <table>
                                    <tr>
                                        <th>region</th>
                                        <th>capex</th>
                                        <th>fixom</th>
                                        <th>varom</th>
                                        <th>efficiency</th>
                                    </tr>
                                    <tr>
                                        <td>Europe_West</td>
                                        <td class="highlight">1.15</td>
                                        <td class="highlight">1.20</td>
                                        <td class="highlight">1.10</td>
                                        <td class="highlight">1.05</td>
                                    </tr>
                                    <tr>
                                        <td>Asia_Developed</td>
                                        <td class="highlight">1.25</td>
                                        <td class="highlight">1.30</td>
                                        <td class="highlight">1.15</td>
                                        <td class="highlight">1.02</td>
                                    </tr>
                                    <tr>
                                        <td>Africa_East</td>
                                        <td class="highlight">0.75</td>
                                        <td class="highlight">0.80</td>
                                        <td class="highlight">0.85</td>
                                        <td class="highlight">0.95</td>
                                    </tr>
                                    <tr>
                                        <td>South_America</td>
                                        <td class="highlight">0.90</td>
                                        <td class="highlight">0.85</td>
                                        <td class="highlight">0.90</td>
                                        <td class="highlight">0.98</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <div class="sample-data">
                            <h4>üó∫Ô∏è Regional Patterns</h4>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li><strong>Expensive:</strong> Europe West, Asia Developed (high labor costs)</li>
                                <li><strong>Moderate:</strong> North America, Europe East</li>
                                <li><strong>Lower cost:</strong> Africa, Latin America, South Asia</li>
                                <li><strong>Efficiency trade-off:</strong> Lower cost regions often have slightly lower efficiency</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="impact-section">
                        <h4>üìà Impact Example</h4>
                        <p>A gas plant in Japan (Asia_Developed) costs 25% more to build than the same plant in Kenya (Africa_East), but this reflects realistic cost differences due to labor, materials, and regulatory environments.</p>
                    </div>
                </div>
            </div>
            
            <!-- Regional Mapping -->
            <div class="table-card">
                <div class="table-header">
                    <div>
                        <div class="table-title">üó∫Ô∏è Regional Mapping</div>
                        <div class="table-path">ep_technoeconomic_assumptions.xlsx ‚Üí ep_regionmap</div>
                    </div>
                    <div class="table-badge">ISO Linking</div>
                </div>
                <div class="table-content">
                    <div class="table-purpose">
                        Maps ISO country codes to economic regions for multiplier application. Ensures each country gets appropriate regional cost adjustments.
                    </div>
                    
                    <div class="content-grid">
                        <div class="sample-data">
                            <h4>üìä Sample Data</h4>
                            <div class="sample-table">
                                <table>
                                    <tr>
                                        <th>iso</th>
                                        <th>region</th>
                                        <th>income_level</th>
                                    </tr>
                                    <tr>
                                        <td>CHE</td>
                                        <td class="highlight">Europe_West</td>
                                        <td>High</td>
                                    </tr>
                                    <tr>
                                        <td>USA</td>
                                        <td class="highlight">North_America</td>
                                        <td>High</td>
                                    </tr>
                                    <tr>
                                        <td>JPN</td>
                                        <td class="highlight">Asia_Developed</td>
                                        <td>High</td>
                                    </tr>
                                    <tr>
                                        <td>KEN</td>
                                        <td class="highlight">Africa_East</td>
                                        <td>Lower_Middle</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <div class="sample-data">
                            <h4>üìã Coverage Details</h4>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li><strong>Countries:</strong> All 190+ ISO codes mapped</li>
                                <li><strong>Regions:</strong> 12 economic regions defined</li>
                                <li><strong>Basis:</strong> World Bank income classifications + geographic proximity</li>
                                <li><strong>Purpose:</strong> Links countries to appropriate cost multiplier regions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Thermal Efficiency -->
            <div class="table-card">
                <div class="table-header">
                    <div>
                        <div class="table-title">‚ö° Thermal Efficiency by Vintage</div>
                        <div class="table-path">ep_technoeconomic_assumptions.xlsx ‚Üí thermal_eff</div>
                    </div>
                    <div class="table-badge">Time Effects</div>
                </div>
                <div class="table-content">
                    <div class="table-purpose">
                        Technology efficiency evolution over time, accounting for technological improvements and learning curves. Newer plants have higher efficiency.
                    </div>
                    
                    <div class="content-grid">
                        <div class="sample-data">
                            <h4>üìä Sample Data</h4>
                            <div class="sample-table">
                                <table>
                                    <tr>
                                        <th>model_name</th>
                                        <th>size</th>
                                        <th>1990</th>
                                        <th>2000</th>
                                        <th>2010</th>
                                        <th>2020</th>
                                    </tr>
                                    <tr>
                                        <td>EGAS01</td>
                                        <td>500</td>
                                        <td>0.35</td>
                                        <td>0.42</td>
                                        <td class="highlight">0.48</td>
                                        <td class="highlight">0.55</td>
                                    </tr>
                                    <tr>
                                        <td>ECOA01</td>
                                        <td>500</td>
                                        <td>0.32</td>
                                        <td>0.36</td>
                                        <td class="highlight">0.40</td>
                                        <td class="highlight">0.44</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <div class="sample-data">
                            <h4>‚è∞ Selection Logic</h4>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li><strong>Vintage matching:</strong> Uses latest year ‚â§ plant commissioning year</li>
                                <li><strong>Size matching:</strong> Uses highest size ‚â§ actual plant capacity</li>
                                <li><strong>Improvement rates:</strong> Gas ~1.5%/year, Coal ~1%/year</li>
                                <li><strong>Future projection:</strong> Trend continues for post-2020 plants</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="key-insights">
                        <h4>üî¨ Technology Trends</h4>
                        <ul style="padding-left: 20px;">
                            <li>Gas efficiency improved from 35% (1990) to 55% (2020) - combined cycle adoption</li>
                            <li>Coal efficiency improved from 32% to 44% - supercritical technology</li>
                            <li>Size effects: Larger plants generally achieve higher efficiency</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="weighted-avg-section">
            <h3>üéØ Final Weighted Average Implementation</h3>
            
            <p>The capacity-weighted averages are computed in the final SQL aggregation query that creates the existing_stock table:</p>
            
            <div class="sql-section">
                <h4>üíª SQL Implementation</h4>
                <div class="sql-query">
<span class="sql-comment">-- Capacity-weighted cost and efficiency calculation</span>
<span class="sql-keyword">SELECT</span>
    model_name,
    model_fuel,
    iso_code,
    "Start year",
    <span class="sql-comment">-- Capacity-weighted cost parameters</span>
    <span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span> * <span class="sql-table">capex</span>) / <span class="sql-keyword">NULLIF</span>(<span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span>), 0) <span class="sql-keyword">AS</span> capex,
    <span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span> * <span class="sql-table">fixom</span>) / <span class="sql-keyword">NULLIF</span>(<span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span>), 0) <span class="sql-keyword">AS</span> fixom,
    <span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span> * <span class="sql-table">varom</span>) / <span class="sql-keyword">NULLIF</span>(<span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span>), 0) <span class="sql-keyword">AS</span> varom,
    <span class="sql-comment">-- Capacity-weighted efficiency</span>
    <span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span> * <span class="sql-table">efficiency</span>) / <span class="sql-keyword">NULLIF</span>(<span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span>), 0) <span class="sql-keyword">AS</span> efficiency,
    <span class="sql-comment">-- Total capacity</span>
    <span class="sql-keyword">SUM</span>(<span class="sql-table">"Capacity (MW)"</span>) / 1000 <span class="sql-keyword">AS</span> Capacity_GW
<span class="sql-keyword">FROM</span> df_gem_iso
<span class="sql-keyword">GROUP BY</span> model_name, model_fuel, iso_code, "Start year"
                </div>
            </div>
            
            <div class="key-insights">
                <h4>üí° Why Capacity Weighting Matters</h4>
                <ul style="padding-left: 20px;">
                    <li><strong>Representative values:</strong> Large plants have more influence on system-wide costs</li>
                    <li><strong>Realistic aggregation:</strong> Avoids artificial averaging of small demonstration plants</li>
                    <li><strong>Model accuracy:</strong> Final parameters reflect actual capacity deployment patterns</li>
                    <li><strong>Economic significance:</strong> Results weighted by actual economic importance</li>
                </ul>
            </div>
            
            <div class="impact-section">
                <h4>üìä Real Impact Example</h4>
                <p><strong>Scenario:</strong> Switzerland has 3 gas plants: 50 MW (old, 45% efficiency), 200 MW (medium, 50% efficiency), 800 MW (new, 55% efficiency)</p>
                <p><strong>Simple average:</strong> (45% + 50% + 55%) √∑ 3 = 50%</p>
                <p><strong>Capacity-weighted:</strong> (50√ó45% + 200√ó50% + 800√ó55%) √∑ 1050 = <strong>53.8%</strong></p>
                <p><strong>Result:</strong> The weighted average better represents the actual system efficiency since most capacity is high-efficiency.</p>
            </div>
        </div>
    </div>
</body>
</html>
